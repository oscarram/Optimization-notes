\begin{remark}
Some elementary properties of conjugate functions
\begin{itemize}
	\item  \textbf{Young inequality} $J(u)+J^*(p^*)\geq p^*(u) \quad \forall u \in U, \forall p^* \in U^*$
	\item  $J^*(0)=\sup_{u\in U}\left((0,u)-J(u)\right)=\sup_{u\in U}\left(-J(u)\right)=-\inf_{u\in U}J(u)$
\end{itemize}
In many applications in optimization, is used the equivalent formulation,
\[
\inf_{u\in U}J(u)=-J^*(0).
\]
\end{remark}
$J\leq F \implies J^*\geq F^*$

\begin{theorem}
	Let $U$ a Banach space and $J^*: U^* \rightarrow \overline{\mathbb{R}}$ be the conjugate of the $J:U\rightarrow \overline{\mathbb{R}}$. Then for all $u\in U$. \[p^* \in \partial J(u) \iff J(u)+J^*(p^*)=p^*(u)\]. \label{th7: conjugate plus functional}
	\begin{proof}
		Let $p^* \in \partial J(u)$, then for all $v \in U$ we have,
		\begin{align*}
			J(v)&\geq J(u) +p^*(v)-p^*(u) \\
			p^*(u)-J(u)&\geq p^*(v)-J(v) \\
			p^*(u)-J(u)&\geq \sup_{v\in U} \left\lbrace p^*(v)-J(v)\right\rbrace\\
			p^*(u)-J(u)&\geq J^*(p^*)\\
			p^*(u)&\geq J^*(p^*)+J(u)
		\end{align*}
		
		In the other hand (Young inequality), by definition of $J^*$, 
		\begin{align*}
			J^*(p^*) \geq p^*(u)-J(u)\\
			J^*(p^*)+J(u) \geq p^*(u)
		\end{align*}
		Therefore we have that $p^*(u)= J(u)+J^*(p^*)$.
		
		Now assume $p^*\notin \partial J(u)$, then $\exists v \in U$ such that,
		\[
			J(v)< J(u)+p^*(v-u)
		\]
		Rearranging the inequality we get,
		\begin{align*}
			p^*(u)-J(u)<p^*(v)-J(v)\leq J^*(p^*)
		\end{align*}
		Which implies that we have the inequality strictly and the equality cannot hold. 
		\[
			p^*(u)<J^*(p^*)+J(u)
		\]
		
	\end{proof}
\end{theorem}
\begin{corollary}
	It follows from previous theorem that $\partial J(u)=\lbrace p^* \in U^* | J(u)+J^*(p^*)=(p^*, u)\rbrace$.
\end{corollary}
\begin{theorem}
	Let $U$ be a Banach space and $J:U\rightarrow \mathbb{R}$ be proper function. If $p^* \in \partial J(u)$ then $u\in \partial J^* (p^*)$
	\begin{proof}
		Let $p^*\in \partial J(u)$. For any $g^* \in U^*$, it follows \[J^*(g^*)=\sup_{v\in U} \left\lbrace
		g^*(v)-J(v)\right\rbrace\geq g^*(u)-J(u)\geq g^*(u)-J(u)\]
		From theorem \ref{th7: conjugate plus functional} 
		\[
		J^*(g^*)\geq g^*(u)-p^*(u)+J^*(p^*) = \left(g^* - p^* \right)(u)+J^*(p^*)\implies u\in \partial J^*(p^*).
		\]
	\end{proof}
\end{theorem}
By iteration the definition, we obtain the bipolar function
$(J^*)^*=J^{**}: U^{**}\rightarrow \overline{\mathbb{R}}$, 
\[
	J^{**}(u)=\sup_{p^*\in U^*} \lbrace p^*(u)-J^*(p^*) \rbrace
\]

\begin{theorem}[Convex envelope theorem.]
	Let $U$ be a reflexive Banach space. The $J^{**}$ is the maximum convex functional below $J$ (also called convex envelope). That is, if $F$ is convex and $F(u)\leq J(u)$, $\forall u \in U$. Then, $J^{**}(u)\leq J(u)$, and $F(u)\leq J^{**}(u)$, $\forall u \in U$. In particular $J^{**}=J$ if and only if $J$ is convex.
	\begin{proof}
		Let $\phi_u \in U^{**}$. Since $U$ is reflexive every $\phi_u \in U^**$ can be related with a member $u \in U$, defining $\phi_u(p^*)=p^*(u)$, we proceed 
		\begin{align*}
			J^{**}(u)&=\sup_{p^*\in U^*} \left\lbrace \phi_u(p^*)-J^*(p^*) \right\rbrace\\
					&=\sup_{p^*\in U^*} \left\lbrace p^*(u)-J^*(p^*) \right\rbrace\\
					&=\sup_{p^*\in U^*} \left\lbrace p^*(u)-\sup_{v\in U}\left\lbrace p^*(v)-J(v)\right\rbrace\right\rbrace\\
					&=\sup_{p^*\in U^*} \left\lbrace p^*(u)+\inf_{v\in U}\left\lbrace J(v)-p^*(v)\right\rbrace\right\rbrace\\
					&=\sup_{p^*\in U^*} \left\lbrace \inf_{v\in U}\left\lbrace p^*(u)+ J(v)-p^*(v)\right\rbrace\right\rbrace\\
					&=\sup_{p^*\in U^*} \left\lbrace \inf_{v\in U}\left\lbrace p^*(u-v)+J(v)\right\rbrace\right\rbrace
		\end{align*}
		Taking $v=u$ in the expression and comparing it with its infimum the inequality holds,
			\begin{align*}
				\inf_{v\in U}\left\lbrace p^* \left(u-v\right)+J(v) \right\rbrace &\leq p^*(u-u)+J(u) \\
				\inf_{v\in U}\left\lbrace p^* \left(u-v\right)+J(v) \right\rbrace &\leq J(u)
			\end{align*}
		We have that $J^{**}(u)\leq J(u)$.
		\begin{align*}
		\sup_{p^* \in U^*}\inf_{v\in U}\left\lbrace p^* \left(u-v\right)+J(v) \right\rbrace &\leq J(u)\\
		J^{**}(u) &\leq J(u)
		\end{align*}
		Now we assume that $F$ is a convex functional and $g^* \in \partial F(u)$ for $u \in U$.
		\begin{align*}
			\implies  F(v)&\geq F(v)+q^*(v-u)\\
					  F^{**}(u)& = \sup_{p^* \in U^*} \inf_{v \in U} \left\lbrace p^*(u-v)+F(u)+q^*(v-u)\right\rbrace \\
					  &\geq \sup_{p^* \in U^*} \inf_{v \in U} \left\lbrace \left(p^*-q^*\right)(u-v)+F(u)\right\rbrace\\
					  &\geq \inf_{v \in U} \left\lbrace (q^*-q^*)(u-v)+F(u) \right\rbrace\\
					  &=F(u)
		\end{align*}
	If $F$ is convex,
	\begin{equation*}
		\implies F(u)\leq F^{**}(u)\leq F(u) \implies F(u)=F^{**}(u),
	\end{equation*}
	Hence, we have
	\begin{equation*}
	F(u)=F^{**}(u)=\sup_{p^* \in U^*} \inf_{v \in U} \left\lbrace p^*(u-v)+F(v)\right\rbrace \leq J^{**}(u).
	\end{equation*}
	\end{proof}
\end{theorem}
